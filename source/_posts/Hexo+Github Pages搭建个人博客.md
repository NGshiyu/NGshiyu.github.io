---
title: Hexo+Github Pagesæ­å»ºä¸ªäººåšå®¢
date: 2025-11-09 18:24:45
categories:
  - [æä¸ƒæ»ä¸‰]
  - [ä¸ªäººåšå®¢]
tags:
  - Hexo
  - Next
  - Blog
  - GitHub Pages
---
{% githubrepo 'NGshiyu/NGshiyu.github.io' %}

# å†™åœ¨æœ€å‰

æ„Ÿè°¢å¼€æºä¸–ç•Œå’ŒAIçš„å‘å±•ï¼Œè®©æˆ‘ç”±äºæ‡’ä¸€ç›´æç½®çš„è®¡åˆ’ï¼Œå¾—ä»¥å®ç°ï¼ï¼ï¼ğŸ™ğŸ™ğŸ™ğŸ™

# ç¢ç¢å¿µ

ä»è¸å…¥äº’è”ç½‘å¼€å‘é¢†åŸŸçš„èµ·å§‹ï¼Œå°±ä¸€ç›´æœ‰å»ºç«‹ä¸ªäººåšå®¢å’Œä¸ªäººçŸ¥è¯†åº“çš„æƒ³æ³•ï¼Œ
ä¸ªäººçŸ¥è¯†åº“å»ºç«‹ç»å†è¿‡ä»OneNote-Notion-Obsidian-Github,ä¹Ÿç®—æ˜¯ç§¯ç´¯äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯ä¸ªäººåšå®¢å´ä¸€ç›´ç”±äºå„ç§è‡ªæˆ‘æ‰¾ç†ç”±è€Œè¿Ÿè¿Ÿæ²¡æœ‰æ¨è¿›ã€‚

åœ¨ä¸€ä¸ªå¿™é‡Œå·é—²çš„å‘¨æœ«ä¸‹åˆï¼Œæˆ‘çªç„¶æƒ³èµ·æ¥äº†è€å¸ˆçš„ä¸€æ®µè¯ï¼Œå¤§æ„æ˜¯ï¼š
ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶åšæŒå†™åšå®¢ï¼Œä¸ç®¡ä½ æ˜¯åœ¨å“ªé‡Œå†™ï¼Œä¸€å®šè¦åŠ¨èµ·æ¥ï¼Œ
ä¸€æ˜¯ä¸ºäº†ç§¯ç´¯ä½ è‡ªå·±çš„çŸ¥è¯†ï¼ŒæŠ€æœ¯å‘å±•çš„é€Ÿåº¦å¤ªå¿«å†…å®¹å¤ªå¤šä½ æ˜¯è·Ÿä¸ä¸Šçš„ï¼Œè®°ä¸‹æ¥åå¤å’€åš¼æ‰è¡Œï¼›
äºŒæ˜¯ä¸ºäº†èƒ½è®©ä½ æœ‰ä¸€ä¸ªè‡ªæˆ‘çš„æ€»ç»“ï¼Œåœ¨å†™åšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œä½ è¦ç»™åˆ«äººçœ‹,è‡ªç„¶éœ€è¦æ·±å…¥æµ…å‡ºï¼Œè®©åˆ«äººèƒ½çœ‹æ‡‚ï¼Œè¿™ä¹Ÿæ˜¯ä½ è‡ªå·±å¢è¿›ç†è§£çš„è¿‡ç¨‹ã€‚

åœ¨å…­å¹´ä¹‹åå†æ¬¡å›æƒ³èµ·è¿™å¥è¯ï¼Œæ„Ÿè§‰åƒæ˜¯åœ¨è¿‡ç”µå½±ï¼Œå¥½å‡ ä¸ªä¸­æ–‡åšå®¢ç«™åªæ˜¯èµ·äº†ä¸ªå¤´å°±æ”¾å¼ƒäº†ï¼Œå¥½åƒè¿™å‡ å¹´ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹ï¼Œå¤„äºä¸€ç§æœ‰ç§©åºçš„æ··ä¹±ä¸­ï¼Œè¿·èŒ«é©»è¶³åˆè¢«æ¨ç€èµ°ã€‚
ç®—äº†ï¼Œä¸ä¸Šä»·å€¼ï¼Œä¸è°ˆæ”¶è·ï¼Œç¡®å®æ˜¯éœ€è¦ç»™è‡ªå·±ç•™ç‚¹ä»€ä¹ˆï¼Œé‚£å°±ä»ç°åœ¨å¼€å§‹å§ï¼


# ç»„ä»¶é€‰å‹

- [Hexo](https://github.com/hexojs/hexo): åŸºäºNode.js å¼€å‘çš„å¼€æºé™æ€åšå®¢æ¡†æ¶ï¼Œå°†Markdownçš„æ–‡ä»¶å¤„ç†ä¸ºé™æ€çš„HTMLç½‘é¡µï¼Œç»“åˆå†…ç½®çš„[æ’ä»¶](https://hexo.io/plugins/)ç­‰å†…å®¹ï¼Œç¼–è¯‘ä¸ºé™æ€ç½‘é¡µéƒ¨ç½²åˆ°æœåŠ¡å™¨
- [Next](https://github.com/next-theme/hexo-theme-next): ä¸€ä¸ªé«˜è´¨é‡ä¸»é¢˜æ’ä»¶ï¼Œé›†æˆäº†ä¸€äº›æ’ä»¶åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿå…·å¤‡æ‰©å±•èƒ½åŠ›ï¼Œå¯ä»¥å¿«é€Ÿå®šåˆ¶ä½ çš„ä¸ªäººåšå®¢ã€‚[å‚è€ƒ](https://hexo-next.readthedocs.io/zh-cn/latest/)
  - gitalk: Next é›†æˆçš„ä¸€ä¸ª GitHub è¯„è®ºæ¡†æ¶ï¼Œæ¥å…¥GitHub Issueï¼Œ
  - ... Nexté›†æˆäº†ä¸€äº›ä½¿ç”¨çš„æ’ä»¶ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥[è‡ªè¡Œæ¢ç´¢](https://theme-next.js.org/plugins/)
- Githubï¼šç”¨äºå­˜æ”¾åšå®¢çš„æºæ•°æ®ï¼Œå¹¶ç»“åˆ Actions + Pages çš„èƒ½åŠ›å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œä»£ç†è®¿é—®

> é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®ç°0æˆæœ¬æ­å»ºåšå®¢ï¼Œå¹¶ä¸”å› ä¸ºæ˜¯æ‰˜ç®¡åœ¨GitHubä¸Šé¢çš„ï¼Œä½ ä¹Ÿæ— é¡»æ‹…å¿ƒè¢«æ”»å‡»ï¼Œåªè¦æ³¨æ„é¿å…åœ¨å…¬å¼€çš„ä»“åº“ä¸­æ³„éœ²è‡ªå·±çš„éšç§å³å¯ï¼Œè€Œä¸”ä¸Šæ‰‹çš„æˆæœ¬éå¸¸ä½ã€‚

# æ­å»ºåšå®¢

## å‡†å¤‡Githubä»“åº“
- æ·»åŠ ä¸€ä¸ªGitHubçš„ä»“åº“ï¼Œå‘½åä¸ºxx.github.ioï¼Œæ·»åŠ README.md
- ä¸ºäº†æœ¬åœ°çš„ç»“æ„æ¸…æ™°ï¼Œç¯å¢ƒå¹²å‡€ï¼Œè¿™é‡Œä»“åº“ç›´æ¥ç•™ç©º

## å®‰è£…Hexo
- åˆ›å»ºæœ¬åœ°çš„Hexoå·¥ä½œç©ºé—´æ–‡ä»¶å¤¹ `~/Hexo`
- æ‰§è¡ŒHexoçš„å®‰è£…å‘½ä»¤
```shell
npm install -g hexo-cli # å…¨å±€å®‰è£…
npm install hexo # éå…¨å±€å®‰è£…
hexo init <folder> # æ­¤å¤„çš„åç§°å’Œä½ çš„ä»“åº“åç§°ä¿æŒç›¸åŒ
cd <folder> # åç»­æ‰€æœ‰çš„æ“ä½œå‡åœ¨æ¬¡ç›®å½•å†…å®Œæˆï¼Œä¸ä¼šå†è¿”å›ä¸Šå±‚ç›®å½•äº†
npm install
```
æ‰§è¡Œå®Œæˆè¿™å‡ æ­¥ä½ çš„ä»“åº“Hexoå°±æ­å»ºå¥½äº†ï¼Œè¿™é‡Œçš„å°å·§æ€æ˜¯è¿™æ ·æˆ‘å°±å¯ä»¥ä½¿ç”¨ä»»æ„çš„ç¼–è¾‘å™¨ï¼ˆå¦‚WebStormã€VsCodeï¼‰æŠŠæˆ‘çš„GitHubä¸Šçš„åšå®¢é¡¹ç›®å½“ä½œä¸€ä¸ªå·¥ç¨‹æ‰“å¼€ï¼Œ
å¯¹äºæˆ‘æ¥è¯´æ¯”è¾ƒå¹²å‡€æ¸…æ™°ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å…³è”GitHubä»£ç ä»“åº“å’Œä½ çš„Hexoå·¥ç¨‹ï¼Œä½¿ç”¨ä»“åº“çš„æç¤ºå¤„ç†ï¼Œå°†æœ¬åœ°å·¥ç¨‹æ¨é€åˆ°GitHubå³å¯

## GitHub Actions + GitHub Pages è‡ªåŠ¨åŒ–éƒ¨ç½²
- æ·»åŠ  `.github/workflows/hexo.yml` 
- æ·»åŠ å¦‚ä¸‹è„šæœ¬å†…å®¹
```yaml
# Sample workflow for building and deploying a Hexo site to GitHub Pages
name: Deploy Hexo site to Pages

on:
  # Runs on pushes targeting the default branch [å½“æ¨é€åˆ° [?] åˆ†æ”¯æ—¶è§¦å‘]
  push:
    branches: [main]

  # Allows you to run this workflow manually from the Actions tab [å…è®¸ä» Actions é¡µé¢æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ]
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages [ä¸º GITHUB_TOKEN è®¾ç½®æƒé™ï¼Œå…è®¸éƒ¨ç½²åˆ° GitHub Pages]
permissions:
  contents: read      # å…è®¸è¯»å–ä»“åº“å†…å®¹
  pages: write        # å…è®¸å†™å…¥ Pages å†…å®¹
  id-token: write     # å…è®¸ä½¿ç”¨ GitHub OIDC ä»¤ç‰Œ

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete. [è®¾ç½®å¹¶å‘ç­–ç•¥ï¼Œé˜²æ­¢é‡å¤è¿è¡Œ]
concurrency:
  group: "pages"           # åŒç»„å†…åªä¿ç•™æœ€æ–°ä»»åŠ¡
  cancel-in-progress: false # ä¸å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡

# Default to bash
defaults:
  run:
    shell: bash

jobs:
  # Build job ------------------ æ„å»ºä»»åŠ¡ ------------------
  build:
    runs-on: ubuntu-latest  # ä½¿ç”¨æœ€æ–° Ubuntu ç¯å¢ƒ

    steps:
      # æ‹‰å–ä»“åº“ä»£ç ï¼ˆåŒ…å«å­æ¨¡å—ï¼‰
      - name: Checkout
        uses: actions/checkout@v4
        with:
          submodules: recursive  # åŒæ­¥å­æ¨¡å—ï¼ˆNext ä¸»é¢˜ï¼‰

      # é…ç½® GitHub Pages ç¯å¢ƒ
      - name: Setup Pages
        id: pages
        uses: actions/configure-pages@v5

      # å®‰è£…envsubst
      - name: Install envsubst
        run: sudo apt-get update && sudo apt-get install -y gettext-base

      # å®‰è£… Node.js ç¯å¢ƒï¼ˆç”¨äºæ‰§è¡Œ Hexo å‘½ä»¤ï¼‰
      - name: Use Node.js 24.x
        uses: actions/setup-node@v4
        with:
          node-version: "24"

      # å®‰è£… Hexo åŠä¾èµ–
      - name: Install Dependencies
        run: npm ci

      # âœ³ï¸ æ›¿æ¢ _config.next.yml æ–‡ä»¶ä¸­çš„å ä½ç¬¦å˜é‡
      # æ­¤æ­¥éª¤ä¼šå°† ${VAR_NAME} æ›¿æ¢ä¸ºä»“åº“ Secrets ä¸­çš„çœŸå®å€¼
      # envsubst æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡æ›¿æ¢å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶ä¸­çš„ ${VAR} å ä½ç¬¦æ›¿æ¢æˆå¯¹åº”çš„ç¯å¢ƒå˜é‡å€¼
      - name: Replace environment variables in Next config
        run: |
          echo "å¼€å§‹æ›¿æ¢ _config.next.yml ä¸­çš„ç¯å¢ƒå˜é‡..."
          envsubst < _config.next.yml > _config.next.resolved.yml
          cp _config.next.resolved.yml _config.next.yml
        # æ³¨å…¥ç¯å¢ƒå˜é‡ ï¼ï¼ï¼æ­¤å¤„æ˜¯æˆ‘çš„ GitHub Secret é…ç½®çš„å¯†é’¥ç¯å¢ƒå˜é‡ï¼Œç”¨äº theme-next çš„ gitalk è¯„è®ºæ’ä»¶ï¼Œå¯ä»¥ç§»é™¤
        env:
          GITALK_GITHUB_CLIENT_ID: ${{ secrets.GITALK_GITHUB_CLIENT_ID }}
          GITALK_GITHUB_CLIENT_SECRET: ${{ secrets.GITALK_GITHUB_CLIENT_SECRET }}

      # ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶ï¼ŒåŠ è½½æ›¿æ¢åçš„é…ç½®æ–‡ä»¶
      - name: Build with Hexo
        run: npx hexo clean && npx hexo generate --prod

      # ä¸Šä¼ æ„å»ºç”Ÿæˆçš„é™æ€æ–‡ä»¶ä½œä¸º artifactï¼ˆä¾›åç»­éƒ¨ç½²ä½¿ç”¨ï¼‰
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./public

  # ------------------ éƒ¨ç½²ä»»åŠ¡ ------------------
  deploy:
    environment:
      name: github-pages   # éƒ¨ç½²ç¯å¢ƒåç§°
      url: ${{ steps.deployment.outputs.page_url }}  # éƒ¨ç½²å®Œæˆåè®¿é—®åœ°å€
    runs-on: ubuntu-latest
    needs: build           # ä¾èµ– build ä»»åŠ¡å®Œæˆ
    steps:
      # éƒ¨ç½²åˆ° GitHub Pages
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```
- è¿™ä¸€æ­¥å®Œæˆä½ çš„åšå®¢å·²ç»æ­å»ºå¥½ï¼Œå¯ä»¥æŠ•å…¥ä½¿ç”¨äº†

# ä¸ªæ€§åŒ–é…ç½®
> Hexo ç›¸å…³çš„ä¸»é¢˜æœ‰éå¸¸å¤šï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæµè§ˆ[Jekyll Themes](http://jekyllthemes.org/)ï¼Œæ‰¾è‡ªå·±å–œæ¬¢çš„ä½¿ç”¨ï¼Œæˆ‘æœ¬äººä½¿ç”¨çš„æ˜¯[hexo-theme-next](https://github.com/next-theme/hexo-theme-next)

## ä¸‹è½½ä¸»é¢˜

> nextä¸»é¢˜ç»å†è¿‡å¤šæ¬¡è¿­ä»£ï¼Œæ£€ç´¢çš„æ—¶å€™æ³¨æ„ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå‚é˜…æœ€æ–°çš„é…ç½®æ–‡æ¡£

nextä¸»é¢˜æ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼Œæˆ‘ä½¿ç”¨æœ€ä¾¿æ·çš„æ–¹å¼å®‰è£… `npm install hexo-theme-next --save`ï¼Œè¿™ä¸ªæ–¹å¼ä¸ç”¨ç®¡ç†è¿‡å¤šçš„æ–‡ä»¶ï¼Œé¿å…åœ¨åç»­ä¸æ–­è¿­ä»£çš„è¿‡ç¨‹ä¸­ä»£ç ä»“åº“è¿‡å¤§ `git pull` çš„æ—¶å€™æ…¢

## é…ç½®

å°†nextä¸»é¢˜çš„é…ç½®æ–‡ä»¶è¿ç§»åˆ°ä¸»ç›®å½•ï¼Œæ–¹ä¾¿åšä¸ªæ€§åŒ–é…ç½®ï¼ŒåŸå§‹æ–‡æ¡£çš„æ³¨é‡Šä¹Ÿå¾ˆé½å…¨ï¼Œè‹±æ–‡ä¸å¥½å¾—å¯ä»¥è®©å¤§æ¨¡å‹åšä¸€æ¬¡ç¿»è¯‘æˆ–è€…ç›´æ¥å‚è€ƒæˆ‘çš„[é…ç½®æ–‡æ¡£](https://github.com/NGshiyu/NGshiyu.github.io/blob/main/_config.next.yml)

```shell
cp node_modules/hexo-theme-next/_config.yml _config.next.yml
```

åŒæ—¶ï¼ŒHexo å’Œ Next ä¸»é¢˜æœ¬èº«å°±è‡ªå¸¦äº†ä¸€äº›æ’ä»¶ï¼Œå¦‚ä½•é…ç½®å¯ä»¥å‚è€ƒå¯¹åº”çš„æ’ä»¶ä»“åº“

# å·¥ä½œç©ºé—´ä¼˜åŒ–ï¼ˆæ³¨æ„å¯†é’¥ç­‰å†…å®¹æ·»åŠ åˆ°`gitignore`ï¼‰

## [direnv](https://direnv.net/)

æ§åˆ¶æœ¬åœ°çš„ç‰¹æ®Šç¯å¢ƒå˜é‡ï¼Œè€Œæ— é¡»æ±¡æŸ“å…¨å±€`bash`ç¯å¢ƒï¼Œåœ¨é¡¹ç›®å†…æ·»åŠ æ–‡ä»¶`.envrc`,å¦‚ï¼š

```shell
# ~/.envrc æˆ– é¡¹ç›®/.envrc
export FOO=foo
export NODE_ENV=development
```

ä½¿ç”¨ `direnv allow` åŠ è½½å˜é‡ï¼Œ

> Tips: <font color="red"> `direnv` å¹¶ä¸æ”¯æŒå±€éƒ¨ `alias` é…ç½®</font>ï¼Œæ‰€ä»¥éœ€è¦ä¸‹é¢çš„å·¥å…·

## [Just](https://github.com/casey/just)
 
ä½¿ç”¨ just å·¥å…·ä¼˜åŒ–æœ¬åœ°å¤„ç†çš„æµç¨‹ï¼Œç®€åŒ–å±€éƒ¨å®‰è£… Hexo è¿‡äºç¹ççš„å‘½ä»¤ï¼Œåœ¨é¡¹ç›®å†…é…ç½® `Justfile` å¦‚ï¼š

```shell
#!/usr/bin/env just --justfile
export PATH := join(justfile_directory(), "node_modules", "bin") + ":" + env_var('PATH')

build:
  npx hexo generate --dev
clean:
  npx hexo clean
server:
  npx hexo server
run:
  npx hexo clean && npx hexo generate --dev && npx hexo server --dev
all:
  npx hexo clean && npx hexo generate --dev
```

åŒæ—¶è¿™ä¸ªå·¥å…·å¯ä»¥ç»“åˆWebStormçš„æ’ä»¶ä½¿ç”¨ï¼Œæ›´åŠ æ–¹ä¾¿

## WebStorm æ’ä»¶

### [env](https://plugins.jetbrains.com/plugin/9525--env-files)

æ ¹æ® .envã€Dockerfile å’Œ docker-compose.yml æ–‡ä»¶è‡ªåŠ¨è¡¥å…¨ç¯å¢ƒå˜é‡ã€‚

# æ€»ç»“

åˆ°æ­¤å¤„å°±åŸºæœ¬æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥æŠ•å…¥ä½¿ç”¨çš„åšå®¢äº†ï¼Œå¦‚æœæƒ³è¦ç¾åŒ–æˆ–è€…æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ `_config.next.yml` é…ç½®å’Œ `plugins` ç»§ç»­æ¢ç´¢ï¼